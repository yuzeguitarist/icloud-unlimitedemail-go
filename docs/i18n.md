# 国际化 (i18n) 支持 / Internationalization Support

## 概述 / Overview

本项目现已支持多语言界面，目前支持以下语言：
This project now supports multiple languages, currently supporting:

- **中文 (Chinese)** - zh
- **英语 (English)** - en
- **德语 (German)** - de

## 配置 / Configuration

### 在配置文件中设置语言 / Set Language in Config File

在 `config.json` 文件中添加 `language` 字段：
Add the `language` field to your `config.json` file:

```json
{
  "language": "en",
  ...
}
```

### 支持的语言代码 / Supported Language Codes

- `zh`, `zh-CN`, `zh-TW`, `chinese` - 中文
- `en`, `en-US`, `en-GB`, `english` - English
- `de`, `de-DE`, `german`, `deutsch` - Deutsch

## 使用示例 / Usage Examples

### 中文 / Chinese (默认)
```json
{
  "language": "zh"
}
```

启动程序后，界面将显示中文：
```
iCloud 隐藏邮箱管理工具
  [1] 查看邮箱列表
  [2] 创建新邮箱 (普通模式)
  ...
```

### English
```json
{
  "language": "en"
}
```

After starting the program, the interface will display in English:
```
iCloud Hide My Email Manager
  [1] View Email List
  [2] Create New Email (Normal Mode)
  ...
```

### Deutsch (German)
```json
{
  "language": "de"
}
```

Nach dem Start des Programms wird die Oberfläche auf Deutsch angezeigt:
```
iCloud Hide My Email Manager
  [1] E-Mail-Liste anzeigen
  [2] Neue E-Mail erstellen (Normaler Modus)
  ...
```

## 架构 / Architecture

### 目录结构 / Directory Structure

```
i18n/
├── i18n.go    # 核心国际化逻辑 / Core i18n logic
├── zh.go      # 中文翻译 / Chinese translations
├── en.go      # 英文翻译 / English translations
└── de.go      # 德文翻译 / German translations
```

### API 使用 / API Usage

在代码中使用国际化字符串：
To use internationalized strings in code:

```go
import "icloud-hme-generator/i18n"

// 设置语言 / Set language
i18n.SetLanguage("en")

// 获取翻译文本 / Get translated text
message := i18n.T("header.main")

// 带参数的翻译 / Translation with parameters
error := i18n.T("err.api_status", statusCode, response)
```

## 添加新翻译 / Adding New Translations

### 步骤 / Steps

1. 在相应的语言文件（`zh.go`, `en.go`, `de.go`）中添加新的键值对
   Add new key-value pairs in the respective language files

2. 使用统一的键名格式
   Use consistent key naming format:
   - `err.*` - 错误消息 / Error messages
   - `header.*` - 页面标题 / Page headers
   - `menu.*` - 菜单项 / Menu items
   - `msg.*` - 一般消息 / General messages
   - `prompt.*` - 用户提示 / User prompts
   - `label.*` - 标签 / Labels
   - `status.*` - 状态 / Status
   - `action.*` - 动作 / Actions

3. 在代码中使用 `i18n.T("key")` 调用
   Use `i18n.T("key")` in code

### 示例 / Example

```go
// zh.go
"greeting.hello": "你好，%s！"

// en.go
"greeting.hello": "Hello, %s!"

// de.go
"greeting.hello": "Hallo, %s!"

// 在代码中使用 / Usage in code
fmt.Println(i18n.T("greeting.hello", username))
```

## 注意事项 / Notes

1. 默认语言为中文（zh）
   Default language is Chinese (zh)

2. 如果翻译键不存在，将返回键本身
   If translation key doesn't exist, the key itself will be returned

3. 语言设置在配置加载时初始化
   Language is initialized when config is loaded

4. 可以通过修改 `config.json` 并重启程序来切换语言
   Switch languages by modifying `config.json` and restarting the program

## 贡献翻译 / Contributing Translations

欢迎为项目添加更多语言支持！请按照以下步骤：
Welcome to add more language support! Please follow these steps:

1. 在 `i18n/` 目录下创建新的语言文件（如 `fr.go` 用于法语）
   Create a new language file in `i18n/` directory (e.g., `fr.go` for French)

2. 复制 `en.go` 的内容并翻译所有字符串
   Copy content from `en.go` and translate all strings

3. 在 `i18n/i18n.go` 的 `translations` map 中注册新语言
   Register the new language in the `translations` map in `i18n/i18n.go`

4. 在 `SetLanguage` 函数中添加新语言的判断逻辑
   Add logic for the new language in the `SetLanguage` function

5. 提交 Pull Request
   Submit a Pull Request

---

## 技术细节 / Technical Details

- 使用 Go 的 sync.RWMutex 确保线程安全
  Uses Go's sync.RWMutex for thread safety

- 支持 Printf 风格的格式化字符串
  Supports Printf-style formatted strings

- 轻量级实现，无外部依赖
  Lightweight implementation with no external dependencies
